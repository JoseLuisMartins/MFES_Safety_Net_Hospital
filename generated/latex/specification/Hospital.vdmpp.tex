\begin{vdmpp}[breaklines=true]
class Hospital
instance variables
 private name: ModelUtils`String := [];
 private location: ModelUtils`Location;
 private agreements: set of ModelUtils`Agreement := {};
 private doctorsIds: set of nat := {};
 private static currId : nat := 0;
 private id : nat := currId;
 
 inv forall d in set doctorsIds & d in set dom SafetyNetNetwork`getInstance().getDoctors();
 
operations

 --constructor
(*@
\label{Hospital:15}
@*)
 public Hospital: ModelUtils`String * ModelUtils`Location * set of ModelUtils`Agreement ==> Hospital
 Hospital(n,l,a) == (
  atomic (
   name := n;
   location := l;
   agreements := a;
   currId := currId + 1;
  ); 
  return self 
 );

 --get hospital name 
(*@
\label{getName:27}
@*)
 public pure getName: () ==> ModelUtils`String
 getName() == (
  return name
 );
 
 --get hospital id
(*@
\label{getId:33}
@*)
 public pure getId: () ==> nat
 getId() == (
  return id
 );
 
 --get hospital doctors
(*@
\label{getDoctorsIds:39}
@*)
 public pure getDoctorsIds: () ==> set of nat
 getDoctorsIds() == (
  return doctorsIds
 );
 
 --get hospital location
(*@
\label{getLocation:45}
@*)
 public pure getLocation: () ==> ModelUtils`Location
 getLocation() == (
  return location
 );
 
 --get hospital agreements
(*@
\label{getAgreements:51}
@*)
 public pure getAgreements: () ==> set of ModelUtils`Agreement
 getAgreements() == (
  return agreements
 );
 
 --add agreement
(*@
\label{addAgreement:57}
@*)
 public addAgreement: ModelUtils`Agreement ==> ()
 addAgreement(a) == (
  agreements := agreements union {a};
 )
 pre a not in set agreements
 post a in set agreements; 
 
 
(*@
\label{removeAgreement:65}
@*)
 --remove agreement
 public removeAgreement: ModelUtils`Agreement ==> ()
 removeAgreement(a) == (
  agreements := agreements \ {a};
 )
 pre a in set agreements
 post a not in set agreements; 
(*@
\label{addDoctor:72}
@*)
 
 --add doctor
 public addDoctor: nat ==> ()
 addDoctor(doctorId) == (
  doctorsIds := doctorsIds union {doctorId}
 )
 pre doctorId not in set doctorsIds
 post doctorId in set doctorsIds; 

(*@
\label{removeDoctor:81}
@*)
 
 --remove doctor 
 public removeDoctor: nat ==> ()
 removeDoctor(doctorId) == (
  doctorsIds := doctorsIds \ {doctorId}
 )
 pre doctorId in set doctorsIds
 post doctorId not in set doctorsIds; 

end Hospital
\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[Hospital:15]{Hospital} & 15&100.0\% & 41 \\
\hline
\hyperref[addAgreement:57]{addAgreement} & 57&100.0\% & 1 \\
\hline
\hyperref[addDoctor:72]{addDoctor} & 72&100.0\% & 27 \\
\hline
\hyperref[getAgreements:51]{getAgreements} & 51&100.0\% & 15 \\
\hline
\hyperref[getDoctorsIds:39]{getDoctorsIds} & 39&100.0\% & 95 \\
\hline
\hyperref[getId:33]{getId} & 33&100.0\% & 245 \\
\hline
\hyperref[getLocation:45]{getLocation} & 45&100.0\% & 6 \\
\hline
\hyperref[getName:27]{getName} & 27&100.0\% & 2409 \\
\hline
\hyperref[removeAgreement:65]{removeAgreement} & 65&100.0\% & 1 \\
\hline
\hyperref[removeDoctor:81]{removeDoctor} & 81&100.0\% & 3 \\
\hline
\hline
Hospital.vdmpp & & 100.0\% & 2843 \\
\hline
\end{longtable}

